{{template "base" .}}

{{ define "main" }}
<div>
    <h2>Login on Youtube & Spotify</h2>
    {{ if .LoggedInSpotify }}
        <p>Spotify login status: Logged in</p>
    {{ else }}
        <p>Spotify login status: Logged out</p>
        <a href="/auth?provider=spotify"><button>Login on Spotify</button></a>
    {{ end }}
    {{ if .LoggedInYoutube }}
        <p>Youtube login status: Logged in</p>
    {{ else }}
        <p>Youtube login status: Logged out</p>
        <a href="/auth?provider=google"><button>Login on Youtube</button></a>
    {{ end }}
    <h2>Select playlists</h2>
    {{ if and .LoggedInSpotify .LoggedInYoutube }}
        {{ with .PlaylistsContent }}
        <table>
            <tr>
                <th>Selected</th>
                <th>Name</th>
                <th>Tracks</th>
                <th>Creator</th>
            </tr>
            {{ range .Playlists }}
                <tr>
                    <td><input type="checkbox"></td>
                    <td>{{ .Name }}</td>
                    <td>{{ .Tracks }}</td>
                    <td>{{ .Creator }}</td>
                </tr>
            {{ end }}
        </table>
        <button type="button">Start Transfer</button>
        {{ end }}
    {{ else }}
        <p>waiting</p>
    {{ end }}
</div>
{{ end }}